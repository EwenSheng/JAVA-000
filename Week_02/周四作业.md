# 周四作业：
1. 使用GCLogAnalysis.java自己演练一遍串行/并行/CMS/G1的案例;
2. 使用压测工具（wrk或sb）,演练geteway-server-0.0.1-SNAPSHOT.jar示例
3. （选做）如果自己本地有可运行的项目,可以按照2的方式演练

根据上述自己对于1和2的演示,写一段对于不同GC的总结,提交到github

##使用环境
```
个人终端：
处理器：AMD Ryzen 9 4900HS with Radeon Graphics,3000 Mhz,8 个内核,16 个逻辑处理器
RAM：40.0 GB(可用 39.4GB)
类型：x64处理器
```

```
JDK版本：
java version "1.8.0_131"
Java(TM) SE Runtime Environment (build 1.8.0_131-b11)
Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)
```

```
涉及工具：
IntelliJ IDEA 2020.2
Windows Terminal 1.3.2651.9
SuperBenchmarker
```

# 解题过程： 

## 使用不同的GC/内存条件测试GCLogAnalysis.java
~~~
public class GCLogAnalysis {
    private static Random random = new Random();
    public static void main(String[] args) {
        // 当前毫秒时间戳
        long startMillis = System.currentTimeMillis();
        // 持续运行毫秒数; 可根据需要进行修改
        long timeoutMillis = TimeUnit.SECONDS.toMillis(1);
        // 结束时间戳
        long endMillis = startMillis + timeoutMillis;
        LongAdder counter = new LongAdder();
        System.out.println("正在执行...");
        // 缓存一部分对象; 进入老年代
        int cacheSize = 2000;
        Object[] cachedGarbage = new Object[cacheSize];
        // 在此时间范围内,持续循环
        while (System.currentTimeMillis() < endMillis) {
            // 生成垃圾对象
            Object garbage = generateGarbage(100*1024);
            counter.increment();
            int randomIndex = random.nextInt(2 * cacheSize);
            if (randomIndex < cacheSize) {
                cachedGarbage[randomIndex] = garbage;
            }
        }
        System.out.println("执行结束!共生成对象次数:" + counter.longValue());
    }

    // 生成对象
    private static Object generateGarbage(int max) {
        int randomSize = random.nextInt(max);
        int type = randomSize % 4;
        Object result = null;
        switch (type) {
            case 0:
                result = new int[randomSize];
                break;
            case 1:
                result = new byte[randomSize];
                break;
            case 2:
                result = new double[randomSize];
                break;
            default:
                StringBuilder builder = new StringBuilder();
                String randomString = "randomString-Anything";
                while (builder.length() < randomSize) {
                    builder.append(randomString);
                    builder.append(max);
                    builder.append(randomSize);
                }
                result = builder.toString();
                break;
        }
        return result;
    }
}
~~~

### 测试条件-堆内存大小命令（公共）
##### 128m
~~~
-Xms128m -Xmx128m 
-- 通过此命令限定最大堆内存和初始堆内存为128m
~~~
##### 256m
~~~
-Xms256m -Xmx256m 
-- 通过此命令限定最大堆内存和初始堆内存为256m
~~~
##### 512m
~~~
-Xms512m -Xmx512m
-- 通过此命令限定最大堆内存和初始堆内存为512m
~~~
##### 1g
~~~
-Xms1g -Xmx1g
-- 通过此命令限定最大堆内存和初始堆内存为1g
~~~
##### 4g
~~~
-Xms4g -Xmx4g
-- 通过此命令限定最大堆内存和初始堆内存为4g
~~~

### Serial GC
~~~
java -XX:+UseSerialGC -XX:+PrintGCDetails -XX:+PrintGCDateStamps GCLogAnalysis
-- 通过此命令运行GCLogAnalysis,通过串行GC(Serial GC)进行测试并打印GC日志（包含时间戳）
~~~

#### 128M
##### 执行结果：
~~~
2020-10-25T13:42:08.728+0800: [GC (Allocation Failure) 2020-10-25T13:42:08.728+0800: [DefNew: 34487K->4351K(39296K), 0.0049110 secs] 34487K->10483K(126720K), 0.0052314 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T13:42:08.741+0800: [GC (Allocation Failure) 2020-10-25T13:42:08.741+0800: [DefNew: 39185K->4350K(39296K), 0.0057708 secs] 45317K->23038K(126720K), 0.0061425 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T13:42:08.755+0800: [GC (Allocation Failure) 2020-10-25T13:42:08.756+0800: [DefNew: 39035K->4351K(39296K), 0.0040071 secs] 57723K->31277K(126720K), 0.0044198 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
...
2020-10-25T13:39:07.647+0800: [Full GC (Allocation Failure) 2020-10-25T13:39:07.647+0800: [Tenured: 87401K->87401K(87424K), 0.0013555 secs] 126503K->126065K(126720K), [Metaspace: 2724K->2724K(1056768K)], 0.0016173 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T13:39:07.649+0800: [Full GC (Allocation Failure) 2020-10-25T13:39:07.649+0800: [Tenured: 87401K->87345K(87424K), 0.0120496 secs] 126617K->126295K(126720K), [Metaspace: 2724K->2724K(1056768K)], 0.0123870 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
2020-10-25T13:39:07.662+0800: [Full GC (Allocation Failure) 2020-10-25T13:39:07.662+0800: [Tenured: 87345K->87414K(87424K), 0.0191209 secs] 126295K->126276K(126720K), [Metaspace: 2724K->2724K(1056768K)], 0.0194208 secs] [Times: user=0.01 sys=0.00, real=0.02 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:48)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
~~~

Y GC次数：9

Full GC次数：20

执行结果：OOM - Java heap space

#### 256M
##### 执行结果：
~~~
2020-10-25T20:44:35.267+0800: [GC (Allocation Failure) 2020-10-25T20:44:35.267+0800: [DefNew: 69952K->8704K(78656K), 0.0103568 secs] 69952K->25053K(253440K), 0.0107255 secs] [Times: user=0.00 sys=0.02, real=0.01 secs]
2020-10-25T20:44:35.291+0800: [GC (Allocation Failure) 2020-10-25T20:44:35.291+0800: [DefNew: 78656K->8700K(78656K), 0.0125699 secs] 95005K->51506K(253440K), 0.0128407 secs] [Times: user=0.00 sys=0.02, real=0.01 secs]
2020-10-25T20:44:35.315+0800: [GC (Allocation Failure) 2020-10-25T20:44:35.315+0800: [DefNew: 78652K->8703K(78656K), 0.0111162 secs] 121458K->77309K(253440K), 0.0114847 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]
...
2020-10-25T20:44:36.181+0800: [Full GC (Allocation Failure) 2020-10-25T20:44:36.181+0800: [Tenured: 174774K->174759K(174784K), 0.0327040 secs] 253131K->251998K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0330285 secs] [Times: user=0.03 sys=0.00, real=0.03 secs]
2020-10-25T20:44:36.215+0800: [Full GC (Allocation Failure) 2020-10-25T20:44:36.215+0800: [Tenured: 174759K->174759K(174784K), 0.0017476 secs] 252741K->252515K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0020035 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T20:44:36.217+0800: [Full GC (Allocation Failure) 2020-10-25T20:44:36.217+0800: [Tenured: 174759K->174740K(174784K), 0.0268466 secs] 252515K->252495K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0271139 secs] [Times: user=0.03 sys=0.00, real=0.03 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:48)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
~~~

Y GC次数：9

Full GC次数：36

执行结果：OOM - Java heap space

#### 512M
##### 执行结果：
~~~
2020-10-25T13:45:37.286+0800: [GC (Allocation Failure) 2020-10-25T13:45:37.287+0800: [DefNew: 139776K->17472K(157248K), 0.0169185 secs] 139776K->46483K(506816K), 0.0173954 secs] [Times: user=0.00 sys=0.02, real=0.02 secs]
2020-10-25T13:45:37.334+0800: [GC (Allocation Failure) 2020-10-25T13:45:37.334+0800: [DefNew: 157079K->17471K(157248K), 0.0197222 secs] 186090K->87979K(506816K), 0.0200406 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
2020-10-25T13:45:37.378+0800: [GC (Allocation Failure) 2020-10-25T13:45:37.378+0800: [DefNew: 157247K->17471K(157248K), 0.0181975 secs] 227755K->132975K(506816K), 0.0185192 secs] [Times: user=0.02 sys=0.02, real=0.02 secs]
...
2020-10-25T13:45:38.058+0800: [GC (Allocation Failure) 2020-10-25T13:45:38.058+0800: [DefNew: 139776K->139776K(157248K), 0.0001311 secs]2020-10-25T13:45:38.058+0800: [Tenured: 341147K->342740K(349568K), 0.0504909 secs] 480923K->342740K(506816K), [Metaspace: 2724K->2724K(1056768K)], 0.0511462 secs] [Times: user=0.05 sys=0.00, real=0.05 secs]
2020-10-25T13:45:38.133+0800: [GC (Allocation Failure) 2020-10-25T13:45:38.133+0800: [DefNew: 139776K->139776K(157248K), 0.0002361 secs]2020-10-25T13:45:38.133+0800: [Tenured: 342740K->331328K(349568K), 0.0573111 secs] 482516K->331328K(506816K), [Metaspace: 2724K->2724K(1056768K)], 0.0579409 secs] [Times: user=0.05 sys=0.00, real=0.06 secs]
2020-10-25T13:45:38.218+0800: [GC (Allocation Failure) 2020-10-25T13:45:38.218+0800: [DefNew: 139776K->139776K(157248K), 0.0003254 secs]2020-10-25T13:45:38.218+0800: [Tenured: 331328K->349388K(349568K), 0.0351602 secs] 471104K->358861K(506816K), [Metaspace: 2724K->2724K(1056768K)], 0.0361770 secs] [Times: user=0.03 sys=0.00, real=0.04 secs]
执行结束!共生成对象次数:9029
~~~

Y GC次数：17

Full GC次数：0

执行结果：共生成对象次数:9029

#### 1G
##### 执行结果：
~~~
2020-10-25T13:55:07.276+0800: [GC (Allocation Failure) 2020-10-25T13:55:07.277+0800: [DefNew: 279616K->34944K(314560K), 0.0293067 secs] 279616K->82745K(1013632K), 0.0296543 secs] [Times: user=0.02 sys=0.01, real=0.03 secs]
2020-10-25T13:55:07.358+0800: [GC (Allocation Failure) 2020-10-25T13:55:07.358+0800: [DefNew: 314560K->34943K(314560K), 0.0362340 secs] 362361K->155717K(1013632K), 0.0367082 secs] [Times: user=0.02 sys=0.02, real=0.04 secs]
2020-10-25T13:55:07.443+0800: [GC (Allocation Failure) 2020-10-25T13:55:07.443+0800: [DefNew: 314559K->34943K(314560K), 0.0340960 secs] 435333K->239788K(1013632K), 0.0345472 secs] [Times: user=0.03 sys=0.00, real=0.03 secs]
...
2020-10-25T13:55:07.928+0800: [GC (Allocation Failure) 2020-10-25T13:55:07.929+0800: [DefNew: 314559K->34943K(314560K), 0.0330155 secs] 884631K->687053K(1013632K), 0.0334357 secs] [Times: user=0.01 sys=0.02, real=0.03 secs]
2020-10-25T13:55:08.013+0800: [GC (Allocation Failure) 2020-10-25T13:55:08.013+0800: [DefNew: 314559K->314559K(314560K), 0.0001950 secs]2020-10-25T13:55:08.014+0800: [Tenured: 652109K->379359K(699072K), 0.0602062 secs] 966669K->379359K(1013632K), [Metaspace: 2724K->2724K(1056768K)], 0.0609365 secs] [Times: user=0.06 sys=0.00, real=0.06 secs]
2020-10-25T13:55:08.122+0800: [GC (Allocation Failure) 2020-10-25T13:55:08.122+0800: [DefNew: 279616K->34944K(314560K), 0.0154945 secs] 658975K->465963K(1013632K), 0.0159639 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
执行结束!共生成对象次数:12226
~~~

Y GC次数：11

Full GC次数：0

执行结果：共生成对象次数:12226

#### 4G
##### 执行结果：
~~~
2020-10-25T13:56:36.316+0800: [GC (Allocation Failure) 2020-10-25T13:56:36.317+0800: [DefNew: 1118528K->139776K(1258304K), 0.0792737 secs] 1118528K->245980K(4054528K), 0.0797568 secs] [Times: user=0.05 sys=0.03, real=0.08 secs]
2020-10-25T13:56:36.581+0800: [GC (Allocation Failure) 2020-10-25T13:56:36.581+0800: [DefNew: 1258304K->139775K(1258304K), 0.0954320 secs] 1364508K->396904K(4054528K), 0.0957574 secs] [Times: user=0.06 sys=0.05, real=0.10 secs]
2020-10-25T13:56:36.856+0800: [GC (Allocation Failure) 2020-10-25T13:56:36.856+0800: [DefNew: 1258303K->139775K(1258304K), 0.0748528 secs] 1515432K->544134K(4054528K), 0.0753131 secs] [Times: user=0.03 sys=0.05, real=0.08 secs]
执行结束!共生成对象次数:13019
~~~

Y GC次数：3

Full GC次数：0

执行结果：共生成对象次数:13019

### Parallel GC
~~~
java -XX:+PrintGCDetails -XX:+PrintGCDateStamps GCLogAnalysis
-- 通过此命令运行GCLogAnalysis,通过并行GC(Parallel GC)进行测试并打印GC日志（包含时间戳）
-- JDK8默认GC为Parallel 因此可以不增加 -XX:+UseParallelGC
~~~

#### 128M
##### 执行结果：
~~~
2020-10-25T14:11:55.777+0800: [GC (Allocation Failure) [PSYoungGen: 33210K->5111K(38400K)] 33210K->9754K(125952K), 0.0024954 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:11:55.787+0800: [GC (Allocation Failure) [PSYoungGen: 38376K->5118K(38400K)] 43019K->20035K(125952K), 0.0039932 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:11:55.798+0800: [GC (Allocation Failure) [PSYoungGen: 38235K->5112K(38400K)] 53152K->33676K(125952K), 0.0038784 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
...
2020-10-25T14:11:55.985+0800: [Full GC (Ergonomics) [PSYoungGen: 14604K->13546K(29184K)] [ParOldGen: 87357K->87357K(87552K)] 101962K->100904K(116736K), [Metaspace: 2724K->2724K(1056768K)], 0.0020531 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:11:55.988+0800: [Full GC (Ergonomics) [PSYoungGen: 14690K->14366K(29184K)] [ParOldGen: 87357K->87357K(87552K)] 102048K->101724K(116736K), [Metaspace: 2724K->2724K(1056768K)], 0.0026737 secs] [Times: user=0.01 sys=0.00, real=0.00 secs]
2020-10-25T14:11:55.991+0800: [Full GC (Ergonomics) [PSYoungGen: 14599K->14366K(29184K)] [ParOldGen: 87357K->87357K(87552K)] 101957K->101724K(116736K), [Metaspace: 2724K->2724K(1056768K)], 0.0020531 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:15:19.217+0800: [Full GC (Ergonomics) [PSYoungGen: 29696K->29547K(58368K)] [ParOldGen: 173992K->173992K(175104K)] 203688K->203539K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0031012 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:15:19.220+0800: [Full GC (Ergonomics) [PSYoungGen: 29631K->29036K(58368K)] [ParOldGen: 175101K->174286K(175104K)] 204733K->203322K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0220750 secs] [Times: user=0.23 sys=0.00, real=0.02 secs]
2020-10-25T14:15:19.243+0800: [Full GC (Ergonomics) [PSYoungGen: 29440K->29367K(58368K)] [ParOldGen: 174996K->174849K(175104K)] 204437K->204216K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0115914 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T14:15:19.254+0800: [Full GC (Allocation Failure) [PSYoungGen: 29367K->29367K(58368K)] [ParOldGen: 174849K->174829K(175104K)] 204216K->204197K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0292616 secs] [Times: user=0.22 sys=0.02, real=0.03 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:48)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
~~~

Y GC次数：13

Full GC次数：14

执行结果：OOM - Java heap space

#### 256M
##### 执行结果：
~~~
2020-10-25T14:15:18.552+0800: [GC (Allocation Failure) [PSYoungGen: 65536K->10733K(76288K)] 65536K->21967K(251392K), 0.0049814 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:15:18.571+0800: [GC (Allocation Failure) [PSYoungGen: 76044K->10747K(76288K)] 87278K->42992K(251392K), 0.0058769 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T14:15:18.590+0800: [GC (Allocation Failure) [PSYoungGen: 76283K->10745K(76288K)] 108528K->67701K(251392K), 0.0063278 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
...
2020-10-25T14:15:19.217+0800: [Full GC (Ergonomics) [PSYoungGen: 29696K->29547K(58368K)] [ParOldGen: 173992K->173992K(175104K)] 203688K->203539K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0031012 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:15:19.220+0800: [Full GC (Ergonomics) [PSYoungGen: 29631K->29036K(58368K)] [ParOldGen: 175101K->174286K(175104K)] 204733K->203322K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0220750 secs] [Times: user=0.23 sys=0.00, real=0.02 secs]
2020-10-25T14:15:19.243+0800: [Full GC (Ergonomics) [PSYoungGen: 29440K->29367K(58368K)] [ParOldGen: 174996K->174849K(175104K)] 204437K->204216K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0115914 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T14:15:19.254+0800: [Full GC (Allocation Failure) [PSYoungGen: 29367K->29367K(58368K)] [ParOldGen: 174849K->174829K(175104K)] 204216K->204197K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0292616 secs] [Times: user=0.22 sys=0.02, real=0.03 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:48)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
~~~

Y GC次数：14

Full GC次数：27

执行结果：OOM - Java heap space

#### 512M
##### 执行结果：
~~~
2020-10-25T14:15:18.552+0800: [GC (Allocation Failure) [PSYoungGen: 65536K->10733K(76288K)] 65536K->21967K(251392K), 0.0049814 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:15:18.571+0800: [GC (Allocation Failure) [PSYoungGen: 76044K->10747K(76288K)] 87278K->42992K(251392K), 0.0058769 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T14:15:18.590+0800: [GC (Allocation Failure) [PSYoungGen: 76283K->10745K(76288K)] 108528K->67701K(251392K), 0.0063278 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
...
2020-10-25T14:15:19.220+0800: [Full GC (Ergonomics) [PSYoungGen: 29631K->29036K(58368K)] [ParOldGen: 175101K->174286K(175104K)] 204733K->203322K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0220750 secs] [Times: user=0.23 sys=0.00, real=0.02 secs]
2020-10-25T14:15:19.243+0800: [Full GC (Ergonomics) [PSYoungGen: 29440K->29367K(58368K)] [ParOldGen: 174996K->174849K(175104K)] 204437K->204216K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0115914 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
2020-10-25T14:15:19.254+0800: [Full GC (Allocation Failure) [PSYoungGen: 29367K->29367K(58368K)] [ParOldGen: 174849K->174829K(175104K)] 204216K->204197K(233472K), [Metaspace: 2724K->2724K(1056768K)], 0.0292616 secs] [Times: user=0.22 sys=0.02, real=0.03 secs]
执行结束!共生成对象次数:9337
~~~

Y GC次数：10

Full GC次数：27

执行结果：共生成对象次数:9337

#### 1G
##### 执行结果：
~~~
2020-10-25T14:20:42.778+0800: [GC (Allocation Failure) [PSYoungGen: 262144K->43519K(305664K)] 262144K->77064K(1005056K), 0.0135877 secs] [Times: user=0.03 sys=0.17, real=0.01 secs]
2020-10-25T14:20:42.836+0800: [GC (Allocation Failure) [PSYoungGen: 305663K->43509K(305664K)] 339208K->149334K(1005056K), 0.0198620 secs] [Times: user=0.03 sys=0.17, real=0.02 secs]
2020-10-25T14:20:42.900+0800: [GC (Allocation Failure) [PSYoungGen: 305653K->43515K(305664K)] 411478K->223722K(1005056K), 0.0180413 secs] [Times: user=0.03 sys=0.17, real=0.02 secs]
...
2020-10-25T14:20:43.613+0800: [GC (Allocation Failure) [PSYoungGen: 156123K->38446K(232960K)] 690507K->609556K(932352K), 0.0099649 secs] [Times: user=0.20 sys=0.00, real=0.01 secs]
2020-10-25T14:20:43.642+0800: [GC (Allocation Failure) [PSYoungGen: 155182K->37559K(232960K)] 726292K->644839K(932352K), 0.0094233 secs] [Times: user=0.20 sys=0.00, real=0.01 secs]
2020-10-25T14:20:43.672+0800: [GC (Allocation Failure) [PSYoungGen: 153978K->41261K(232960K)] 761257K->681238K(932352K), 0.0099369 secs] [Times: user=0.05 sys=0.16, real=0.01 secs]
2020-10-25T14:20:43.682+0800: [Full GC (Ergonomics) [PSYoungGen: 41261K->0K(232960K)] [ParOldGen: 639976K->367474K(699392K)] 681238K->367474K(932352K), [Metaspace: 2724K->2724K(1056768K)], 0.0505563 secs] [Times: user=0.61 sys=0.00, real=0.05 secs]
执行结束!共生成对象次数:13507
~~~

Y GC次数：23

Full GC次数：2

执行结果：共生成对象次数:13507

#### 4G
##### 执行结果：
~~~
2020-10-25T14:23:55.251+0800: [GC (Allocation Failure) [PSYoungGen: 1048576K->174588K(1223168K)] 1048576K->238433K(4019712K), 0.0387799 secs] [Times: user=0.13 sys=0.49, real=0.04 secs]
2020-10-25T14:23:55.467+0800: [GC (Allocation Failure) [PSYoungGen: 1223164K->174586K(1223168K)] 1287009K->374890K(4019712K), 0.0471422 secs] [Times: user=0.11 sys=0.50, real=0.05 secs]
2020-10-25T14:23:55.685+0800: [GC (Allocation Failure) [PSYoungGen: 1223162K->174590K(1223168K)] 1423466K->506387K(4019712K), 0.0411884 secs] [Times: user=0.28 sys=0.33, real=0.04 secs]
2020-10-25T14:23:55.896+0800: [GC (Allocation Failure) [PSYoungGen: 1223166K->174579K(1223168K)] 1554963K->639451K(4019712K), 0.0418459 secs] [Times: user=0.23 sys=0.17, real=0.04 secs]
执行结束!共生成对象次数:15721
~~~

Y GC次数：4

Full GC次数：0

执行结果：共生成对象次数:15721

### CMS GC
~~~
java -XX:+UseConcMarkSweepGC -XX:+PrintGCDetails -XX:+PrintGCDateStamps GCLogAnalysis
-- 通过此命令运行GCLogAnalysis,通过CMS GC进行测试并打印GC日志（包含时间戳）
~~~

#### 128M
##### 执行结果：
~~~
2020-10-25T14:34:48.353+0800: [GC (Allocation Failure) 2020-10-25T14:34:48.353+0800: [ParNew: 34944K->4352K(39296K), 0.0023841 secs] 34944K->12066K(126720K), 0.0025755 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.364+0800: [GC (Allocation Failure) 2020-10-25T14:34:48.364+0800: [ParNew: 39291K->4352K(39296K), 0.0043324 secs] 47005K->22787K(126720K), 0.0047415 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.376+0800: [GC (Allocation Failure) 2020-10-25T14:34:48.376+0800: [ParNew: 39030K->4351K(39296K), 0.0065445 secs] 57466K->36879K(126720K), 0.0068562 secs] [Times: user=0.22 sys=0.00, real=0.01 secs]
...
2020-10-25T14:34:48.745+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 87394K(87424K)] 125801K(126720K), 0.0007079 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.746+0800: [CMS-concurrent-mark-start]
2020-10-25T14:34:48.747+0800: [Full GC (Allocation Failure) 2020-10-25T14:34:48.747+0800: [CMS2020-10-25T14:34:48.749+0800: [CMS-concurrent-mark: 0.001/0.003 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
 (concurrent mode failure): 87394K->87394K(87424K), 0.0042764 secs] 126559K->125970K(126720K), [Metaspace: 2724K->2724K(1056768K)], 0.0045027 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.751+0800: [Full GC (Allocation Failure) 2020-10-25T14:34:48.752+0800: [CMS: 87394K->87394K(87424K), 0.0015101 secs] 126577K->126251K(126720K), [Metaspace: 2724K->2724K(1056768K)], 0.0018578 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.754+0800: [Full GC (Allocation Failure) 2020-10-25T14:34:48.754+0800: [CMS: 87394K->87374K(87424K), 0.0145811 secs] 126251K->126232K(126720K), [Metaspace: 2724K->2724K(1056768K)], 0.0148372 secs] [Times: user=0.00 sys=0.00, real=0.02 secs]
2020-10-25T14:34:48.769+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 87374K(87424K)] 126232K(126720K), 0.0005214 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.769+0800: [CMS-concurrent-mark-start]
Exception in thread "main" 2020-10-25T14:34:48.770+0800: java.lang.OutOfMemoryError: Java heap space[CMS-concurrent-mark: 0.000/0.000 secs]
 [Times: user=0.02 sys=0.00, real=0.00 secs]
2020-10-25T14:34:48.770+0800: [CMS-concurrent-preclean-start]
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:48)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
2020-10-25T14:34:48.771+0800: [CMS-concurrent-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
~~~

Y GC次数：11

Full GC次数：8

CMS次数：10

执行结果：OOM - Java heap space

#### 256M
##### 执行结果：
~~~
2020-10-25T17:52:58.608+0800: [GC (Allocation Failure) 2020-10-25T17:52:58.608+0800: [ParNew: 69952K->8703K(78656K), 0.0053736 secs] 69952K->24366K(253440K), 0.0057967 secs] [Times: user=0.02 sys=0.02, real=0.01 secs]
2020-10-25T17:52:58.627+0800: [GC (Allocation Failure) 2020-10-25T17:52:58.627+0800: [ParNew: 78573K->8704K(78656K), 0.0068095 secs] 94236K->48112K(253440K), 0.0071926 secs] [Times: user=0.09 sys=0.13, real=0.01 secs]
2020-10-25T17:52:58.648+0800: [GC (Allocation Failure) 2020-10-25T17:52:58.648+0800: [ParNew: 78656K->8699K(78656K), 0.0107501 secs] 118064K->72818K(253440K), 0.0110966 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
...
2020-10-25T17:52:59.255+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 174625K(174784K)] 237365K(253440K), 0.0004970 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.256+0800: [CMS-concurrent-mark-start]
2020-10-25T17:52:59.257+0800: [CMS-concurrent-mark: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.257+0800: [CMS-concurrent-preclean-start]
2020-10-25T17:52:59.258+0800: [CMS-concurrent-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.258+0800: [CMS-concurrent-abortable-preclean-start]
2020-10-25T17:52:59.258+0800: [CMS-concurrent-abortable-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.258+0800: [GC (CMS Final Remark) [YG occupancy: 77829 K (78656 K)]2020-10-25T17:52:59.259+0800: [Rescan (parallel) , 0.0004047 secs]2020-10-25T17:52:59.259+0800: [weak refs processing, 0.0001208 secs]2020-10-25T17:52:59.259+0800: [class unloading, 0.0002439 secs]2020-10-25T17:52:59.259+0800: [scrub symbol table, 0.0005597 secs]2020-10-25T17:52:59.260+0800: [scrub string table, 0.0002325 secs][1 CMS-remark: 174625K(174784K)] 252454K(253440K), 0.0020034 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.261+0800: [CMS-concurrent-sweep-start]
2020-10-25T17:52:59.261+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.261+0800: [CMS2020-10-25T17:52:59.261+0800: [CMS-concurrent-sweep: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
 (concurrent mode failure): 174697K->174693K(174784K), 0.0352257 secs] 253323K->239747K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0355300 secs] [Times: user=0.03 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.299+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.299+0800: [CMS: 174693K->174302K(174784K), 0.0363394 secs] 252916K->241797K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0367483 secs] [Times: user=0.05 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.336+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 174302K(174784K)] 242275K(253440K), 0.0004353 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.336+0800: [CMS-concurrent-mark-start]
2020-10-25T17:52:59.338+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.338+0800: [CMS2020-10-25T17:52:59.340+0800: [CMS-concurrent-mark: 0.001/0.003 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
 (concurrent mode failure): 174302K->174602K(174784K), 0.0397088 secs] 252384K->244762K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0400502 secs] [Times: user=0.03 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.381+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.381+0800: [CMS: 174602K->174657K(174784K), 0.0360933 secs] 253120K->245679K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0364686 secs] [Times: user=0.03 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.417+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 174657K(174784K)] 246100K(253440K), 0.0004524 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.418+0800: [CMS-concurrent-mark-start]
2020-10-25T17:52:59.419+0800: [CMS-concurrent-mark: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.419+0800: [CMS-concurrent-preclean-start]
2020-10-25T17:52:59.419+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.419+0800: [CMS2020-10-25T17:52:59.420+0800: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
 (concurrent mode failure): 174657K->174764K(174784K), 0.0406182 secs] 253303K->246768K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0408625 secs] [Times: user=0.05 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.462+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.462+0800: [CMS: 174764K->174036K(174784K), 0.0346037 secs] 253347K->248000K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0350032 secs] [Times: user=0.03 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.497+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 174036K(174784K)] 248698K(253440K), 0.0006897 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.498+0800: [CMS-concurrent-mark-start]
2020-10-25T17:52:59.499+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.499+0800: [CMS2020-10-25T17:52:59.501+0800: [CMS-concurrent-mark: 0.001/0.002 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
 (concurrent mode failure): 174741K->174675K(174784K), 0.0402683 secs] 253393K->249356K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0405872 secs] [Times: user=0.05 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.540+0800: [Full GC (Allocation Failure) 2020-10-25T17:52:59.541+0800: [CMS: 174675K->174753K(174784K), 0.0369586 secs] 253297K->248982K(253440K), [Metaspace: 2724K->2724K(1056768K)], 0.0373426 secs] [Times: user=0.03 sys=0.00, real=0.04 secs]
2020-10-25T17:52:59.578+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 174753K(174784K)] 249255K(253440K), 0.0004858 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:52:59.579+0800: 执行结束!共生成对象次数:4239
~~~

Y GC次数：15

Full GC次数：12

CMS次数：14

执行结果：共生成对象次数:4239

#### 512M
##### 执行结果：
~~~
2020-10-25T17:59:00.223+0800: [GC (Allocation Failure) 2020-10-25T17:59:00.223+0800: [ParNew: 139776K->17472K(157248K), 0.0087869 secs] 139776K->47717K(506816K), 0.0091554 secs] [Times: user=0.17 sys=0.00, real=0.01 secs]
2020-10-25T17:59:00.262+0800: [GC (Allocation Failure) 2020-10-25T17:59:00.262+0800: [ParNew: 157248K->17472K(157248K), 0.0113978 secs] 187493K->94013K(506816K), 0.0116666 secs] [Times: user=0.05 sys=0.16, real=0.01 secs]
2020-10-25T17:59:00.296+0800: [GC (Allocation Failure) 2020-10-25T17:59:00.296+0800: [ParNew: 157248K->17471K(157248K), 0.0178728 secs] 233789K->135846K(506816K), 0.0183451 secs] [Times: user=0.20 sys=0.00, real=0.02 secs]
2020-10-25T17:59:00.336+0800: [GC (Allocation Failure) 2020-10-25T17:59:00.336+0800: [ParNew: 157247K->17472K(157248K), 0.0187925 secs] 275622K->182265K(506816K), 0.0192454 secs] [Times: user=0.19 sys=0.00, real=0.02 secs]
...
2020-10-25T17:59:01.157+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 342830K(349568K)] 343522K(506816K), 0.0004262 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:59:01.157+0800: [CMS-concurrent-mark-start]
2020-10-25T17:59:01.158+0800: [CMS-concurrent-mark: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:59:01.159+0800: [CMS-concurrent-preclean-start]
2020-10-25T17:59:01.159+0800: [CMS-concurrent-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:59:01.160+0800: [CMS-concurrent-abortable-preclean-start]
2020-10-25T17:59:01.160+0800: [CMS-concurrent-abortable-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:59:01.160+0800: [GC (CMS Final Remark) [YG occupancy: 14348 K (157248 K)]2020-10-25T17:59:01.160+0800: [Rescan (parallel) , 0.0004224 secs]2020-10-25T17:59:01.161+0800: [weak refs processing, 0.0001372 secs]2020-10-25T17:59:01.161+0800: [class unloading, 0.0002794 secs]2020-10-25T17:59:01.161+0800: [scrub symbol table, 0.0004005 secs]2020-10-25T17:59:01.162+0800: [scrub string table, 0.0001349 secs][1 CMS-remark: 342830K(349568K)] 357178K(506816K), 0.0017738 secs] [Times: user=0.19 sys=0.00, real=0.00 secs]
2020-10-25T17:59:01.162+0800: [CMS-concurrent-sweep-start]
2020-10-25T17:59:01.163+0800: [CMS-concurrent-sweep: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T17:59:01.163+0800: [CMS-concurrent-reset-start]
2020-10-25T17:59:01.164+0800: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
执行结束!共生成对象次数:9792
~~~

Y GC次数：18

Full GC次数：0

CMS次数：8

执行结果：共生成对象次数:9792

#### 1G
##### 执行结果：
~~~
2020-10-25T18:00:33.722+0800: [GC (Allocation Failure) 2020-10-25T18:00:33.723+0800: [ParNew: 279616K->34943K(314560K), 0.0139896 secs] 279616K->82256K(1013632K), 0.0145458 secs] [Times: user=0.00 sys=0.00, real=0.02 secs]
2020-10-25T18:00:33.782+0800: [GC (Allocation Failure) 2020-10-25T18:00:33.782+0800: [ParNew: 314477K->34944K(314560K), 0.0203693 secs] 361790K->162458K(1013632K), 0.0207155 secs] [Times: user=0.20 sys=0.20, real=0.02 secs]
2020-10-25T18:00:33.848+0800: [GC (Allocation Failure) 2020-10-25T18:00:33.848+0800: [ParNew: 314560K->34944K(314560K), 0.0316734 secs] 442074K->240821K(1013632K), 0.0320992 secs] [Times: user=0.39 sys=0.02, real=0.03 secs]
2020-10-25T18:00:33.925+0800: [GC (Allocation Failure) 2020-10-25T18:00:33.926+0800: [ParNew: 314560K->34942K(314560K), 0.0332784 secs] 520437K->322846K(1013632K), 0.0336438 secs] [Times: user=0.38 sys=0.03, real=0.03 secs]
2020-10-25T18:00:34.004+0800: [GC (Allocation Failure) 2020-10-25T18:00:34.004+0800: [ParNew: 314558K->34942K(314560K), 0.0328723 secs] 602462K->400483K(1013632K), 0.0332176 secs] [Times: user=0.36 sys=0.05, real=0.03 secs]
...
2020-10-25T18:00:34.416+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 614790K(699072K)] 650434K(1013632K), 0.0003957 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T18:00:34.417+0800: [CMS-concurrent-mark-start]
2020-10-25T18:00:34.418+0800: [CMS-concurrent-mark: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T18:00:34.419+0800: [CMS-concurrent-preclean-start]
2020-10-25T18:00:34.419+0800: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T18:00:34.420+0800: [CMS-concurrent-abortable-preclean-start]
2020-10-25T18:00:34.462+0800: [GC (Allocation Failure) 2020-10-25T18:00:34.463+0800: [ParNew (promotion failed): 314559K->314559K(314560K), 0.0252336 secs]2020-10-25T18:00:34.488+0800: [CMS2020-10-25T18:00:34.488+0800: [CMS-concurrent-abortable-preclean: 0.001/0.068 secs] [Times: user=0.25 sys=0.00, real=0.07 secs]
 (concurrent mode failure): 697256K->354397K(699072K), 0.0590367 secs] 929350K->354397K(1013632K), [Metaspace: 2724K->2724K(1056768K)], 0.0848816 secs] [Times: user=0.26 sys=0.00, real=0.09 secs]
2020-10-25T18:00:34.593+0800: [GC (Allocation Failure) 2020-10-25T18:00:34.593+0800: [ParNew: 279616K->34943K(314560K), 0.0159594 secs] 634013K->449146K(1013632K), 0.0164002 secs] [Times: user=0.20 sys=0.00, real=0.02 secs]
2020-10-25T18:00:34.609+0800: [GC (CMS Initial Mark) [1 CMS-initial-mark: 414202K(699072K)] 449434K(1013632K), 0.0005192 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T18:00:34.609+0800: [CMS-concurrent-mark-start]
2020-10-25T18:00:34.612+0800: [CMS-concurrent-mark: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T18:00:34.612+0800: [CMS-concurrent-preclean-start]
2020-10-25T18:00:34.613+0800: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2020-10-25T18:00:34.613+0800: [CMS-concurrent-abortable-preclean-start]
执行结束!共生成对象次数:12859
~~~

Y GC次数：11

Full GC次数：0

CMS次数：3

执行结果：共生成对象次数:12859

#### 4G
##### 执行结果：
~~~
2020-10-25T18:01:58.099+0800: [GC (Allocation Failure) 2020-10-25T18:01:58.100+0800: [ParNew: 886080K->110720K(996800K), 0.0345598 secs] 886080K->209346K(4083584K), 0.0349913 secs] [Times: user=0.06 sys=0.34, real=0.04 secs]
2020-10-25T18:01:58.279+0800: [GC (Allocation Failure) 2020-10-25T18:01:58.279+0800: [ParNew: 996800K->110720K(996800K), 0.0403498 secs] 1095426K->354526K(4083584K), 0.0408044 secs] [Times: user=0.20 sys=0.39, real=0.04 secs]
2020-10-25T18:01:58.456+0800: [GC (Allocation Failure) 2020-10-25T18:01:58.457+0800: [ParNew: 996800K->110720K(996800K), 0.0668392 secs] 1240606K->499912K(4083584K), 0.0672767 secs] [Times: user=0.97 sys=0.05, real=0.07 secs]
2020-10-25T18:01:58.661+0800: [GC (Allocation Failure) 2020-10-25T18:01:58.661+0800: [ParNew: 996800K->110720K(996800K), 0.0702615 secs] 1385992K->660918K(4083584K), 0.0707392 secs] [Times: user=0.80 sys=0.02, real=0.07 secs]
执行结束!共生成对象次数:15003
~~~

Y GC次数：4

Full GC次数：0

CMS GC次数：0

执行结果：共生成对象次数: 15003

### G1 GC
~~~
java -XX:+UseG1GC -XX:+PrintGC -XX:+PrintGCDateStamps GCLogAnalysis
-- 通过此命令运行GCLogAnalysis,通过G1 GC进行测试并打印GC日志（包含时间戳）
-- 
~~~

#### 128M
##### 执行结果：
~~~
2020-10-25T14:52:54.436+0800: [GC pause (G1 Evacuation Pause) (young) 33M->12M(128M), 0.0029970 secs]
2020-10-25T14:52:54.445+0800: [GC pause (G1 Evacuation Pause) (young) 43M->24M(128M), 0.0034938 secs]
2020-10-25T14:52:54.473+0800: [GC pause (G1 Evacuation Pause) (young)-- 108M->90M(128M), 0.0029625 secs]
...
2020-10-25T14:52:54.594+0800: [GC concurrent-mark-start]
 101M->101M(128M), 0.0009245 secs]
2020-10-25T14:52:54.595+0800: [Full GC (Allocation Failure)  101M->100M(128M), 0.0024558 secs]
2020-10-25T14:52:54.597+0800: [GC concurrent-mark-abort]
2020-10-25T14:52:54.598+0800: [GC pause (G1 Evacuation Pause) (young)-- 102M->101M(128M), 0.0010130 secs]
2020-10-25T14:52:54.599+0800: [GC pause (G1 Evacuation Pause) (young) (initial-mark)-- 102M->102M(128M), 0.0011420 secs]
2020-10-25T14:52:54.601+0800: [GC concurrent-root-region-scan-start]
2020-10-25T14:52:54.601+0800: 2020-10-25T14:52:54.601+0800: [Full GC (Allocation Failure) [GC concurrent-root-region-scan-end, 0.0001107 secs]
2020-10-25T14:52:54.601+0800: [GC concurrent-mark-start]
 102M->100M(128M), 0.0022913 secs]
2020-10-25T14:52:54.603+0800: [GC concurrent-mark-abort]
2020-10-25T14:52:54.604+0800: [GC pause (G1 Evacuation Pause) (young)-- 102M->102M(128M), 0.0008322 secs]
2020-10-25T14:52:54.605+0800: [Full GC (Allocation Failure)  102M->100M(128M), 0.0034652 secs]
2020-10-25T14:52:54.608+0800: [GC pause (G1 Evacuation Pause) (young)-- 101M->101M(128M), 0.0010512 secs]
2020-10-25T14:52:54.610+0800: [Full GC (Allocation Failure)  101M->100M(128M), 0.0023905 secs]
2020-10-25T14:52:54.612+0800: [GC pause (G1 Humongous Allocation) (young) (initial-mark)-- 101M->101M(128M), 0.0009326 secs]
2020-10-25T14:52:54.613+0800: [GC concurrent-root-region-scan-start]
2020-10-25T14:52:54.613+0800: [GC concurrent-root-region-scan-end, 0.0001284 secs]
2020-10-25T14:52:54.614+0800: [GC concurrent-mark-start]
2020-10-25T14:52:54.613+0800: [GC pause (G1 Humongous Allocation) (young) 101M->101M(128M), 0.0010653 secs]
2020-10-25T14:52:54.615+0800: [Full GC (Allocation Failure)  101M->101M(128M), 0.0027989 secs]
2020-10-25T14:52:54.618+0800: [GC concurrent-mark-abort]
2020-10-25T14:52:54.618+0800: [GC pause (G1 Evacuation Pause) (young) 101M->101M(128M), 0.0009503 secs]
2020-10-25T14:52:54.619+0800: [GC pause (G1 Evacuation Pause) (young) 101M->101M(128M), 0.0006966 secs]
2020-10-25T14:52:54.620+0800: [Full GC (Allocation Failure)  101M->101M(128M), 0.0020942 secs]
2020-10-25T14:52:54.622+0800: [Full GC (Allocation Failure)  101M->101M(128M), 0.0022982 secs]
2020-10-25T14:52:54.624+0800: [GC pause (G1 Evacuation Pause) (young) 101M->101M(128M), 0.0007578 secs]
2020-10-25T14:52:54.625+0800: [GC pause (G1 Evacuation Pause) (young) (initial-mark) 101M->101M(128M), 0.0006810 secs]
2020-10-25T14:52:54.626+0800: [GC concurrent-root-region-scan-start]
2020-10-25T14:52:54.626+0800: 2020-10-25T14:52:54.626+0800: [Full GC (Allocation Failure) [GC concurrent-root-region-scan-end, 0.0001267 secs]
2020-10-25T14:52:54.626+0800: [GC concurrent-mark-start]
 101M->638K(128M), 0.0024571 secs]
2020-10-25T14:52:54.629+0800: Exception in thread "main" [GC concurrent-mark-abort]
java.lang.OutOfMemoryError: Java heap space
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:51)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
~~~

Y GC次数：24

Full GC次数：13

执行结果：OOM - Java heap space

#### 256M
##### 执行结果：
~~~
2020-10-25T21:02:24.421+0800: [GC pause (G1 Evacuation Pause) (young) 30M->12M(256M), 0.0029888 secs]
2020-10-25T21:02:24.430+0800: [GC pause (G1 Evacuation Pause) (young) 39M->24M(256M), 0.0029570 secs]
2020-10-25T21:02:24.442+0800: [GC pause (G1 Evacuation Pause) (young) 62M->38M(256M), 0.0033298 secs]
...
2020-10-25T21:02:24.940+0800: [GC concurrent-mark-start]
 200M->199M(256M), 0.0041665 secs]
2020-10-25T21:02:24.944+0800: [GC concurrent-mark-abort]
2020-10-25T21:02:24.944+0800: [GC pause (G1 Humongous Allocation) (young)-- 199M->199M(256M), 0.0012890 secs]
2020-10-25T21:02:24.946+0800: [Full GC (Allocation Failure)  199M->199M(256M), 0.0043661 secs]
2020-10-25T21:02:24.950+0800: [GC pause (G1 Evacuation Pause) (young) (initial-mark) 199M->199M(256M), 0.0012953 secs]
2020-10-25T21:02:24.952+0800: [GC concurrent-root-region-scan-start]
2020-10-25T21:02:24.952+0800: [GC concurrent-root-region-scan-end, 0.0001074 secs]
2020-10-25T21:02:24.952+0800: [GC pause (G1 Evacuation Pause) (young)2020-10-25T21:02:24.952+0800: [GC concurrent-mark-start]
 199M->199M(256M), 0.0009901 secs]
2020-10-25T21:02:24.953+0800: [Full GC (Allocation Failure)  199M->199M(256M), 0.0026854 secs]
2020-10-25T21:02:24.956+0800: [Full GC (Allocation Failure)  199M->199M(256M), 0.0036800 secs]
2020-10-25T21:02:24.959+0800: [GC concurrent-mark-abort]
2020-10-25T21:02:24.960+0800: [GC pause (G1 Evacuation Pause) (young) 199M->199M(256M), 0.0009057 secs]
2020-10-25T21:02:24.961+0800: [GC pause (G1 Evacuation Pause) (young) 199M->199M(256M), 0.0008137 secs]
2020-10-25T21:02:24.962+0800: [Full GC (Allocation Failure)  199M->638K(256M), 0.0035966 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at GCLogAnalysis.generateGarbage(GCLogAnalysis.java:48)
        at GCLogAnalysis.main(GCLogAnalysis.java:25)
~~~

Y GC次数：71

Full GC次数：18

执行结果：OOM - Java heap space

#### 512M
##### 执行结果：
~~~
2020-10-25T14:59:47.864+0800: [GC pause (G1 Evacuation Pause) (young) 437M->414M(512M), 0.0022795 secs]
2020-10-25T14:59:47.870+0800: [GC pause (G1 Evacuation Pause) (mixed)-- 439M->432M(512M), 0.0036145 secs]
2020-10-25T14:59:47.877+0800: [GC pause (G1 Evacuation Pause) (mixed)-- 452M->448M(512M), 0.0020594 secs]
2020-10-25T14:59:47.880+0800: [GC pause (G1 Humongous Allocation) (young) (initial-mark) 451M->449M(512M), 0.0010054 secs]
2020-10-25T14:59:47.881+0800: [GC concurrent-root-region-scan-start]
2020-10-25T14:59:47.881+0800: [GC concurrent-root-region-scan-end, 0.0001712 secs]
2020-10-25T14:59:47.881+0800: [GC concurrent-mark-start]
2020-10-25T14:59:47.881+0800: [GC pause (G1 Humongous Allocation) (young)-- 452M->451M(512M), 0.0011574 secs]
2020-10-25T14:59:47.883+0800: [GC pause (G1 Evacuation Pause) (young)-- 453M->452M(512M), 0.0013369 secs]
2020-10-25T14:59:47.885+0800: [GC pause (G1 Evacuation Pause) (young)-- 453M->453M(512M), 0.0010565 secs]
2020-10-25T14:59:47.886+0800: [Full GC (Allocation Failure)  453M->338M(512M), 0.0462067 secs]
2020-10-25T14:59:47.933+0800: [GC concurrent-mark-abort]
2020-10-25T14:59:47.933+0800: [GC pause (G1 Humongous Allocation) (young) (initial-mark) 342M->339M(512M), 0.0014488 secs]
2020-10-25T14:59:47.935+0800: [GC concurrent-root-region-scan-start]
2020-10-25T14:59:47.935+0800: [GC concurrent-root-region-scan-end, 0.0002100 secs]
2020-10-25T14:59:47.935+0800: [GC concurrent-mark-start]
2020-10-25T14:59:47.937+0800: [GC concurrent-mark-end, 0.0017053 secs]
2020-10-25T14:59:47.937+0800: [GC remark, 0.0013147 secs]
2020-10-25T14:59:47.939+0800: [GC cleanup 350M->350M(512M), 0.0006597 secs]
2020-10-25T14:59:47.942+0800: [GC pause (G1 Evacuation Pause) (young) 367M->348M(512M), 0.0023101 secs]
2020-10-25T14:59:47.946+0800: [GC pause (G1 Humongous Allocation) (young) (initial-mark) 352M->348M(512M), 0.0015541 secs]
2020-10-25T14:59:47.947+0800: [GC concurrent-root-region-scan-start]
2020-10-25T14:59:47.948+0800: [GC concurrent-root-region-scan-end, 0.0002401 secs]
2020-10-25T14:59:47.948+0800: [GC concurrent-mark-start]
2020-10-25T14:59:47.949+0800: [GC concurrent-mark-end, 0.0014180 secs]
2020-10-25T14:59:47.950+0800: [GC remark, 0.0011606 secs]
2020-10-25T14:59:47.951+0800: [GC cleanup 364M->364M(512M), 0.0007485 secs]
2020-10-25T14:59:47.955+0800: [GC pause (G1 Evacuation Pause) (young) 379M->356M(512M), 0.0024333 secs]
执行结束!共生成对象次数:10731
~~~

Y GC次数：62

Full GC次数：1

执行结果：共生成对象次数:10731

#### 1G
##### 执行结果：
~~~
2020-10-25T15:01:11.125+0800: [GC pause (G1 Evacuation Pause) (young)-- 863M->696M(1024M), 0.0079765 secs]
2020-10-25T15:01:11.136+0800: [GC pause (G1 Evacuation Pause) (mixed) 712M->626M(1024M), 0.0110288 secs]
2020-10-25T15:01:11.157+0800: [GC pause (G1 Evacuation Pause) (mixed) 687M->633M(1024M), 0.0044727 secs]
2020-10-25T15:01:11.163+0800: [GC pause (G1 Humongous Allocation) (young) (initial-mark) 639M->634M(1024M), 0.0020956 secs]
2020-10-25T15:01:11.165+0800: [GC concurrent-root-region-scan-start]
2020-10-25T15:01:11.165+0800: [GC concurrent-root-region-scan-end, 0.0002315 secs]
2020-10-25T15:01:11.166+0800: [GC concurrent-mark-start]
2020-10-25T15:01:11.167+0800: [GC concurrent-mark-end, 0.0019201 secs]
2020-10-25T15:01:11.168+0800: [GC remark, 0.0013115 secs]
2020-10-25T15:01:11.170+0800: [GC cleanup 648M->635M(1024M), 0.0008168 secs]
2020-10-25T15:01:11.171+0800: [GC concurrent-cleanup-start]
2020-10-25T15:01:11.171+0800: [GC concurrent-cleanup-end, 0.0001353 secs]
2020-10-25T15:01:11.204+0800: [GC pause (G1 Evacuation Pause) (young) 846M->678M(1024M), 0.0090079 secs]
2020-10-25T15:01:11.218+0800: [GC pause (G1 Evacuation Pause) (mixed) 713M->590M(1024M), 0.0072235 secs]
2020-10-25T15:01:11.233+0800: [GC pause (G1 Evacuation Pause) (mixed) 641M->529M(1024M), 0.0087817 secs]
2020-10-25T15:01:11.249+0800: [GC pause (G1 Evacuation Pause) (mixed) 586M->499M(1024M), 0.0089268 secs]
2020-10-25T15:01:11.259+0800: [GC pause (G1 Humongous Allocation) (young) (initial-mark) 501M->499M(1024M), 0.0021433 secs]
2020-10-25T15:01:11.261+0800: [GC concurrent-root-region-scan-start]
2020-10-25T15:01:11.262+0800: [GC concurrent-root-region-scan-end, 0.0002640 secs]
2020-10-25T15:01:11.262+0800: [GC concurrent-mark-start]
2020-10-25T15:01:11.263+0800: [GC concurrent-mark-end, 0.0016585 secs]
2020-10-25T15:01:11.264+0800: [GC remark, 0.0013897 secs]
2020-10-25T15:01:11.265+0800: [GC cleanup 516M->513M(1024M), 0.0009352 secs]
2020-10-25T15:01:11.266+0800: [GC concurrent-cleanup-start]
2020-10-25T15:01:11.267+0800: [GC concurrent-cleanup-end, 0.0001417 secs]
2020-10-25T15:01:11.320+0800: [GC pause (G1 Evacuation Pause) (young)-- 849M->618M(1024M), 0.0110079 secs]
执行结束!共生成对象次数:14964
~~~

Y GC次数：21

Full GC次数：0

执行结果：共生成对象次数:14964

#### 4G
##### 执行结果：
~~~
2020-10-25T15:03:19.127+0800: [GC pause (G1 Evacuation Pause) (young) 204M->61M(4096M), 0.0110924 secs]
2020-10-25T15:03:19.167+0800: [GC pause (G1 Evacuation Pause) (young) 239M->115M(4096M), 0.0127403 secs]
2020-10-25T15:03:19.208+0800: [GC pause (G1 Evacuation Pause) (young) 293M->170M(4096M), 0.0129601 secs]
2020-10-25T15:03:19.249+0800: [GC pause (G1 Evacuation Pause) (young) 348M->225M(4096M), 0.0127998 secs]
2020-10-25T15:03:19.289+0800: [GC pause (G1 Evacuation Pause) (young) 403M->286M(4096M), 0.0135203 secs]
2020-10-25T15:03:19.330+0800: [GC pause (G1 Evacuation Pause) (young) 464M->343M(4096M), 0.0135524 secs]
2020-10-25T15:03:19.373+0800: [GC pause (G1 Evacuation Pause) (young) 521M->402M(4096M), 0.0140730 secs]
2020-10-25T15:03:19.421+0800: [GC pause (G1 Evacuation Pause) (young) 620M->469M(4096M), 0.0147547 secs]
2020-10-25T15:03:19.473+0800: [GC pause (G1 Evacuation Pause) (young) 713M->541M(4096M), 0.0181259 secs]
2020-10-25T15:03:19.544+0800: [GC pause (G1 Evacuation Pause) (young) 855M->642M(4096M), 0.0224731 secs]
2020-10-25T15:03:19.659+0800: [GC pause (G1 Evacuation Pause) (young) 1130M->762M(4096M), 0.0265766 secs]
2020-10-25T15:03:19.746+0800: [GC pause (G1 Evacuation Pause) (young) 1168M->870M(4096M), 0.0247570 secs]
2020-10-25T15:03:19.859+0800: [GC pause (G1 Evacuation Pause) (young) 1438M->1009M(4096M), 0.0308865 secs]
2020-10-25T15:03:19.992+0800: [GC pause (G1 Evacuation Pause) (young) 1677M->1162M(4096M), 0.0360820 secs]
执行结束!共生成对象次数:16198
~~~

Y GC次数：14

Full GC次数：0

执行结果：共生成对象次数: 16198

## 使用压测工具sb,演练geteway-server-0.0.1-SNAPSHOT.jar示例

### 测试条件-堆内存大小命令（公共）
~~~
sb -uhttp://localhost:8088/api/hello -c 20 -N 60
-- -c 20 = 使用20根线程 并发测试
-- -N 60 = 测试持续60秒
~~~

##### 512m
~~~
-Xms512m -Xmx512m
-- 通过此命令限定最大堆内存和初始堆内存为512m
~~~
##### 4g
~~~
-Xms4g -Xmx4g
-- 通过此命令限定最大堆内存和初始堆内存为4g
~~~

### Serial GC
#### 512M
~~~
java -jar -XX:+UseSerialGC -Xms512m -Xmx512m gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 17:17:54
[Press C to stop the test]
457727  (RPS: 7169.5)
---------------Finished!----------------
Finished at 2020/10/25 17:18:58 (took 00:01:03.9390669)
Status 200:    457727

RPS: 7490.8 (requests/second)
Max: 145ms
Min: 0ms
Avg: 0.1ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 2ms
  99%   below 2ms
99.9%   below 4ms
~~~
#### 4G
~~~
java -jar -XX:+UseSerialGC -Xms4g -Xmx4g gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 17:16:11
[Press C to stop the test]
468515  (RPS: 7343.4)
---------------Finished!----------------
Finished at 2020/10/25 17:17:15 (took 00:01:03.8577953)
Status 200:    468516

RPS: 7672.1 (requests/second)
Max: 37ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 3ms
~~~

### Parallel GC
#### 512M
~~~
java -jar -Xms512m -Xmx512m gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 17:05:36
[Press C to stop the test]
478708  (RPS: 7504.7)
---------------Finished!----------------
Finished at 2020/10/25 17:06:39 (took 00:01:03.8810166)
Status 200:    478709

RPS: 7834.3 (requests/second)
Max: 36ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 2ms
~~~
#### 4G
~~~
java -jar -Xms4g -Xmx4g gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 17:02:08
[Press C to stop the test]
481417  (RPS: 7551.9)
---------------Finished!----------------
Finished at 2020/10/25 17:03:12 (took 00:01:03.8243579)
Status 200:    481418

RPS: 7880.8 (requests/second)
Max: 34ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 2ms
~~~

### CMS GC
#### 512M
~~~
java -jar -XX:+UseConcMarkSweepGC -Xms512m -Xmx512m gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 16:34:46
[Press C to stop the test]
471201  (RPS: 7369.4)
---------------Finished!----------------
Finished at 2020/10/25 16:35:51 (took 00:01:04.0457679)
Status 200:    471202

RPS: 7709.9 (requests/second)
Max: 30ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 3ms
~~~
#### 4G
~~~
java -jar -XX:+UseConcMarkSweepGC -Xms4g -Xmx4g gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 16:38:53
[Press C to stop the test]
471802  (RPS: 7399.8)
---------------Finished!----------------
Finished at 2020/10/25 16:39:57 (took 00:01:03.8358441)
Status 200:    471802

RPS: 7723.3 (requests/second)
Max: 36ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 3ms
~~~

### G1 GC
#### 512M
~~~
java -jar -XX:+UseG1GC -Xms512m -Xmx512m gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 16:56:41
[Press C to stop the test]
465249  (RPS: 7291.2)
---------------Finished!----------------
Finished at 2020/10/25 16:57:45 (took 00:01:03.9011595)
Status 200:    465253

RPS: 7614.4 (requests/second)
Max: 39ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 3ms
~~~
#### 4G
~~~
java -jar -XX:+UseG1GC -Xms4g -Xmx4g gateway-server-0.0.1-SNAPSHOT.jar
~~~
##### 执行结果：
~~~
Starting at 2020/10/25 16:50:10
[Press C to stop the test]
476150  (RPS: 7471.7)
---------------Finished!----------------
Finished at 2020/10/25 16:51:14 (took 00:01:03.8043729)
Status 200:    476154

RPS: 7795.1 (requests/second)
Max: 32ms
Min: 0ms
Avg: 0ms

  50%   below 0ms
  60%   below 0ms
  70%   below 0ms
  80%   below 0ms
  90%   below 0ms
  95%   below 0ms
  98%   below 1ms
  99%   below 2ms
99.9%   below 2ms
~~~

## 总结

#### 汇总各类GC结果

大对象GC测试：

gc_name | Heap-Size | Young GC | Full GC | Result | Other
:----: | :----: | :----: | :----: | :----: | :----:
Serial GC | 128M | 9 | 20 | OOM - Java heap space |  |
Parallel GC | 128M | 13 | 14 | OOM - Java heap space |  |
CMS GC | 128M | 11 | 8 | OOM - Java heap space | |
G1 GC | 128M | 24 | 13 | OOM - Java heap space |  |
Serial GC | 256M | 9 | 35 | OOM - Java heap space |  |
Parallel GC | 256M | 14 | 27 | OOM - Java heap space |  |
CMS GC | 256M | 15 | 12 | 4239 |  |
G1 GC | 256M | 71 | 18 | OOM - Java heap space |  |
Serial GC | 512M | 17 | 36 | 9029 |  |
Parallel GC | 512M | 10 | 27 | 9337 |  |
CMS GC | 512M | 18 | 0 | 9792 |  |
G1 GC | 512M | 62 | 1 | 10731 |  |
Serial GC | 1G | 11 | 0 | 12226 |  |
Parallel GC | 1G | 23 | 2 | 13507 |  |
CMS GC | 1G | 11 | 0 | 12859 |  |
G1 GC | 1G | 21 | 0 | 14964 |  |
Serial GC | 4G | 3 | 0 | 13019 |  |
Parallel GC | 4G | 4 | 0 | 15721 |  |
CMS GC | 4G | 4 | 0 | 15003 |  |
G1 GC | 4G | 14 | 0 | 16198 |  |

并发压力测试：

gc_name | Heap-Size | RPS(requests/second) | MAX(ms) 
:----: | :----: | :----: | :----:
Serial GC | 512M | 7490.8  | 145ms 
Serial GC | 4G | 7672.1  | 37ms 
Parallel GC | 512M | 7834.3  | 36ms 
Parallel GC | 4G | 7880.8  | 34ms 
CMS GC | 512M | 7709.9  | 30ms 
CMS GC | 4G | 7723.3  | 36ms 
G1 GC | 512M | 7614.4 | 39ms 
G1 GC | 4G | 7795.1 | 32ms 

##### 分析 & 笔记

1. 针对大量对象操作当Heap可用空间不足时会频繁发生Full GC最终Allocation Failure导致OOM异常
2. 测试SerialGC在Heap最大/初始 为256MB时,有一定概率情况下会发生OOM,少数情况下会正常执行完毕；
   分析下来可能因为是"串行"GC执行时（且执行失败了,循环执行）占用了业务（1秒内生成对象）线程执行造成不再增加大对象且满足了循环退出的条件执行完毕,导致有一定概率会执行成功的情况；
   若抢占中业务获取执行线程且会发生OOM;
3. 当堆变大时GC的次数越少,会对应减少Full GC的次数,同时降低了OOM的情况;
4. 当堆变大时因为可分配的区域变大,导致GC时间会变长;
5. 经过测试吞吐量大的场景下建议使用 Parallel GC > CMS GC ≈ G1 GC > Serial GC
6. 经过测试需要响应速度的场景下G1 > CMS GC  ≈ Parallel GC > Serial GC
~~~
   G1 GC
    Young GC => 标记复制
    Mixed GC =>
    GC处理过程
    1. Initial Mark - 初始标记  - 伴随STW
    2. Root Region Scan - Root区扫描
    3. Concurrent Mark - 并发标记
    4. Remark - 再次标记 - 伴随STW
    5. Cleanup - 清理 - 伴随STW
    Old GC =>  Serial old gc 串行算法
    理解上G1为CMS的升级版本,是为了解决CMS的一些缺陷（内存空间碎片等）而产生的,同时G1目的是为了让STW的停顿时间和分布变的可预期&可配置化;
    G1将堆内存划分成多个Region,每个运行时的角色不同(Eden,Survivor,Old,humongous),根据这些不同的小块进行GC操作
   CMS GC
    年轻代 => 标记-复制(ParNew GC)算法
    老年代 => 标记-清除算法
    GC的处理过程：
    1. Initial Mark - 初始标记  - 伴随STW
    2. Concurent Mark - 并发标记
    3. Concurrent Preclean - 并发预清理
    4. Final Remark - 最终标记 - 伴随STW
    5. Concurrent Sweep - 并发清除
    6. Concurrent Reset - 并发重制
    经过测试发现CMS在执行时消耗时间比ParallelGC小了一个数量级,通过细化GC步骤减少STW时间内执行的任务,有效的减少了GC产生的STW时时间;
    但同时,由于是并发执行Full GC效率没有并行的高; 同时因为老年代的算法会造成内存空间碎片,在某些情况下GC会造成不可预测的暂停时间,特别是堆内存较大的情况（理解上是因为使用了空闲列表[free-lists]的原因）,并且CMS会在并发阶段与应用线程抢占CPU时间;
   Parallel GC 
    年轻代 => 标记-复制算法(使用引用跟踪)
    老年代 => 标记-清除-整理算法(使用引用跟踪)
    并行执行,GC期间垃圾回收行为都会触发STW（为了减少SWT时间所有CPU并行执行）,但对要求响应速度的应用线程会有一定影响（GC时会性能有影响）,同时GC间隔期间不会启动GC线程不浪费资源
   Serial GC 
    年轻代 => 标记-复制算法
    老年代 => 标记-整理算法
    串行GC,GC时会造成STW
~~~

笔记(思维导图)：https://www.yuque.com/docs/share/c8b6499a-11f7-41cb-a32a-ad35fdf748f4?# 